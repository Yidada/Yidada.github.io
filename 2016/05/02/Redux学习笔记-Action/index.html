


<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Redux学习笔记-ActionZ-INDEX</title>
  <meta http-equiv="description" content="张达铭-Z-INDEX" />
  <meta name="description" content="张达铭的个人博客，张达铭的技术作品，张达铭的生活成长" />
  <meta name="keywords" content="张达铭,张益达,个人博客, 个人网站, web前端,JavaScript,css,html" />
  <meta name="author" content="张达铭,张益达,zhangdaming,zhangyida" />


  <!-- css -->
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/css/z-index.css">
    
  
</head>
<body>
<!-- header -->
<header id="menu-outer">
  <nav id="menu-inner">
    <a href="/">
      <i class="iconfont logo">&#xe600;</i>
      Z-INDEX
    </a>
    
      <a href="/">首页</a>
    
      <a href="/archives">归档</a>
    
  </nav>
</header>



<!-- content -->

<article id="content-outer">
  <div id="content-inner">
    
<article class="typo" id="post">
  <h1>Redux学习笔记-Action</h1>
  <blockquote>
<p>Action</p>
</blockquote>
<p><strong>定义：把数据从应用传到store的有效载荷，是store数据的唯一来源，一般通过store.dispatch()将action传递到store。</strong><br>一个Action对象如下定义</p>
<pre><code>{
    type:&apos;ADD_TODO&apos;,
    text:&apos;Build Hello World!&apos;
}
</code></pre><p>如上，一个Action对象本质上就是一个JavaScript的普通对象；并且我们对其约定一定要有一个type属性用来表示要执行的动作，通常情况下type属性存放着一个字符串常量，且当应用的规模越来越大的情况下我们推荐采用单独的constant的文件夹进行存放这些action常量。</p>
<pre><code>import {ADD_TODO,REMOVE_TODO} from &apos;../constant/actionType&apos;;
</code></pre><p>除了type属性Action对象当中的结构完全自己决定，<a href="https://github.com/acdlite/flux-standard-action" target="_blank" rel="external">参照Flux的对Action的建议。</a></p>
<p><strong>Action一定要有的</strong></p>
<ul>
<li>必须是一个纯JavaScript对象</li>
<li>必须有type属性</li>
</ul>
<p><strong>Action最好有</strong></p>
<ul>
<li>有一个error属性</li>
<li>有一个payload属性</li>
<li>有一个meta属性</li>
</ul>
<p><strong>error属性</strong><br>如果这个Action对象代表的是一个错误，则最好为其添加一个error属性并设置为true；如果一个Action对象的error属性为true将会被类比为rejected Promise。通常来说，payload属性应该是一个error对象，如果error有除了true之外的值，包括undefiend和null，那么这个Action对象一定不能被理解为error。<br><strong>payload属性</strong><br>理解为存放空间，可以为任意类型的值，代表Action的内容，任何关于Action且不是type或者状态的信息应该存放在payload当中。就像上面error中所说，如果是代表error的Action其payload中最好存放的是error对象，这也很像Promise的做法。<br><strong>meta属性</strong><br>一般代表着一些不属于payload的额外信息。<br><strong><em>注意我们应该尽量少的在action中传递数据。</em></strong></p>
<hr>
<blockquote>
<p>Action创建函数</p>
</blockquote>
<p>Action创建函数是生成action的方法。一定要区别”action”和”action创建函数”，注意区分。<br>不同于传统的Flux（表示还没学会就成了传统了=，=）不会出发dispatch而是仅仅返回一个action对象。</p>
<pre><code>function addTodo(text){
    return{
        type:ADD_TODO,
        text
    };
}
</code></pre><p>这样做更利于测试和移植，只需将action创建的<strong>函数结果</strong>传给dispatch()方法即可实例化dispatch。</p>
<pre><code>dispatch(addTodo(text));
dispatch(comleteTod(index));
</code></pre><p>store里能直接通过store.dispatch()调用dispatch方法，但是大多数情况下会采用react-redux提供的connect()帮助器来调用。bindActionCreators()可以自动把多个action创建函数绑定到dispatch()方法上。</p>
<blockquote>
<p>如上就是一个Action的介绍，其中包含了</p>
<ul>
<li>Action类型</li>
<li>action创建函数</li>
</ul>
</blockquote>

</article>
<div style="clear:both"></div>

<!--<nav id="pagination">-->
  <!---->
    <!--<a href="/2016/05/07/generator-学习笔记/" class="prev">&larr; Prev</a>-->
  <!---->

  <!---->

  <!---->
    <!--<a href="/2016/03/15/如何使用git提交代码/" class="next">Next &rarr;</a>-->
  <!---->
<!--</nav>-->


  </div>
</article>


<!-- footer -->





<!-- js -->

  <!-- scripts list from theme config.yml -->
  
    <script src="/js/zepto.js"></script>
  
    <script src="/js/z-index.js"></script>
  


</body>
</html>
